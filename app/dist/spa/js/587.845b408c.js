"use strict";(self["webpackChunkiconos_plataforma"]=self["webpackChunkiconos_plataforma"]||[]).push([[587],{3587:(e,a,n)=>{n.r(a),n.d(a,{default:()=>le});var l=n(3673),t=n(8880);const o=(0,l._)("div",{class:"text-h6 text-primary"},"Generaciones",-1),d={class:"col"},i={class:"col text-right"},s=(0,l.Uk)("Ver generación en área de estudiantes"),u=(0,l.Uk)("Eliminar");function r(e,a,n,r,c,m){const p=(0,l.up)("q-input"),w=(0,l.up)("q-btn"),g=(0,l.up)("q-form"),_=(0,l.up)("q-card-section"),f=(0,l.up)("q-card"),v=(0,l.up)("q-tooltip"),W=(0,l.up)("q-td"),k=(0,l.up)("addStudent"),b=(0,l.up)("q-tr"),h=(0,l.up)("q-table"),q=(0,l.up)("q-separator"),Z=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(Z,{padding:""},{default:(0,l.w5)((()=>[o,(0,l.Wm)(h,{class:"shadow-0",loading:r.loading,"no-data-label":"Sin datos",rows:r.items,columns:r.columns},{top:(0,l.w5)((()=>[(0,l.Wm)(f,{class:"shadow-24 bg-dark full-width q-my-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,{class:"row q-col-gutter-md items-center",onSubmit:(0,t.iM)(r.submitNew,["prevent"])},{default:(0,l.w5)((()=>[(0,l._)("div",d,[(0,l.Wm)(p,{modelValue:r.newItem.name,"onUpdate:modelValue":a[0]||(a[0]=e=>r.newItem.name=e),label:"Nombre",standout:"bg-primary text-white",dense:"",dark:"",required:""},null,8,["modelValue"])]),(0,l._)("div",i,[(0,l.Wm)(w,{label:"Crear generación",color:"primary",unelevated:"","no-caps":"",disabled:""==r.newItem.name,type:"submit"},null,8,["disabled"])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),body:(0,l.w5)((e=>[(0,l.Wm)(b,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{key:"name",props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{onClick:a=>r.estudiantesFilter(e.row.name),flat:"",label:e.row.name,"no-caps":""},{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[s])),_:1})])),_:2},1032,["onClick","label"])])),_:2},1032,["props"]),(0,l.Wm)(W,{key:"add",props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{generacion:e.row},null,8,["generacion"])])),_:2},1032,["props"]),(0,l.Wm)(W,{key:"actions",props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{icon:"delete",onClick:a=>r.deleteItem(e.row),size:"xs",padding:"4px",color:"negative",round:"",unelevated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[u])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["loading","rows","columns"]),(0,l.Wm)(q,{spaced:""})])),_:1})}var c=n(515),m=n.n(c),p=n(1959),w=n(9582),g=n(7874),_=(n(1082),n(8825)),f=n(2323);const v={class:"row full-width q-col-gutter-md"},W={class:"col-6"},k={class:"text-h6"},b=(0,l.Uk)("Estudiantes en "),h={class:"text-bold text-accent"},q=(0,l.Uk)(" generación."),Z={class:"text-body1"},y={class:"text-caption text-grey"},Q=(0,l.Uk)("Generación actual: "),x={class:"col-6"},C=(0,l._)("div",{class:"text-caption"},"Estudiantes",-1),G={class:"text-body1"},V={class:"text-caption text-grey"},I=(0,l.Uk)("Generación actual: ");function U(e,a,n,t,o,d){const i=(0,l.up)("q-btn"),s=(0,l.up)("q-item"),u=(0,l.up)("q-checkbox"),r=(0,l.up)("q-item-section"),c=(0,l.up)("q-list"),m=(0,l.up)("q-card-section"),p=(0,l.up)("q-card"),w=(0,l.up)("q-inner-loading"),g=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(i,{label:"Administrar estudiantes",unelevated:"",color:"primary",size:"sm","no-caps":"",onClick:t.dialogOpen},null,8,["onClick"]),(0,l.Wm)(g,{modelValue:t.dialog,"onUpdate:modelValue":a[0]||(a[0]=e=>t.dialog=e),"full-width":""},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"shadow-24"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l._)("div",v,[(0,l._)("div",W,[(0,l.Wm)(p,{class:"shadow-24 bg-dark text-white"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{dense:"",separator:""},{default:(0,l.w5)((()=>[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l._)("div",k,[b,(0,l._)("span",h,(0,f.zw)(n.generacion.name),1),q])])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.estudiantes,((e,a)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[e.currentGen?((0,l.wg)(),(0,l.j4)(s,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:e.currentGen,"onUpdate:modelValue":a=>e.currentGen=a,onClick:a=>t.addRemoveGen(e),color:"secondary"},null,8,["modelValue","onUpdate:modelValue","onClick"])])),_:2},1024),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l._)("div",Z,(0,f.zw)(e.user.name),1),(0,l._)("div",y,[Q,(0,l._)("strong",null,(0,f.zw)(e.generacion.name),1)])])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0)],64)))),256))])),_:1})])),_:1})])),_:1})]),(0,l._)("div",x,[(0,l.Wm)(p,{class:"shadow-24"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{dense:"",separator:""},{default:(0,l.w5)((()=>[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[C])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.estudiantes,((e,a)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[e.currentGen?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(s,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:e.currentGen,"onUpdate:modelValue":a=>e.currentGen=a,onClick:a=>t.addRemoveGen(e)},null,8,["modelValue","onUpdate:modelValue","onClick"])])),_:2},1024),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l._)("div",G,(0,f.zw)(e.user.name),1),(0,l._)("div",V,[I,(0,l._)("strong",null,(0,f.zw)(e.generacion.name),1)])])),_:2},1024)])),_:2},1024))],64)))),256))])),_:1})])),_:1})])),_:1})])])])),_:1}),(0,l.Wm)(w,{showing:t.loading},null,8,["showing"])])),_:1})])),_:1},8,["modelValue"])])}var H=n(8603),S=n.n(H);const z={props:["generacion"],setup(e){const a=(0,_.Z)(),n=(0,g.oR)(),l=((0,w.tv)(),(0,p.iH)(!1)),t=()=>{l.value=!0,s()},o=(0,p.iH)(!0),d=(0,p.iH)(null),i=(0,p.iH)(null),s=async()=>{for(var a in o.value=!0,d.value=await n.dispatch("api/GetAllData","estudiantes"),d.value)d.value[a].currentGen=S().isEqual(d.value[a].generacion,e.generacion);o.value=!1},u=l=>{var t={coll:"estudiantes",_id:l._id,generacion:l.currentGen?e.generacion:""};n.dispatch("api/SaveItem",t).then((e=>{a.notify("Estudiante actualizado")}))};return{loading:o,dialog:l,dialogOpen:t,estudiantes:d,generacionModel:i,addRemoveGen:u}}};var D=n(8240),E=n(6778),R=n(151),A=n(5589),N=n(7011),T=n(3414),Y=n(2035),j=n(5735),F=n(6941),L=n(7518),O=n.n(L);z.render=U;const B=z;O()(z,"components",{QBtn:D.Z,QDialog:E.Z,QCard:R.Z,QCardSection:A.Z,QList:N.Z,QItem:T.Z,QItemSection:Y.Z,QCheckbox:j.Z,QInnerLoading:F.Z});const K={components:{addStudent:B},setup(){const e=(0,_.Z)(),a=(0,w.tv)(),n=(0,g.oR)(),l=(0,p.iH)(!0),t=(0,p.iH)([]),o=[{name:"name",label:"Nombre",field:"name",align:"left"},{name:"add",label:"Añadir estudiantes",field:"add",align:"center"},{name:"actions"}],d=(0,p.iH)({name:""}),i=()=>{const e=m()(m()({},d.value),{},{coll:"generaciones"});n.dispatch("api/SaveItem",e).then((e=>{s(),d.value={name:""}}))},s=()=>{n.dispatch("api/GetAllData","generaciones").then((e=>{t.value=e,l.value=!1}))},u=a=>{e.dialog({title:"Eliminar generación",message:"Los estudiantes ligados a esta generación seguirán mostrando el nombre en su información.",cancel:"Cancelar",ok:"Eliminar"}).onOk((()=>{n.dispatch("api/RemoveItem",["generaciones","_id",a._id]).then((a=>{s(),e.notify("Eliminado")}))}))};s();const r=e=>{a.push({path:"/estudiantes",query:{filter:e}})};return{loadItem:s,loading:l,items:t,columns:o,newItem:d,submitNew:i,deleteItem:u,estudiantesFilter:r}}};var M=n(4379),P=n(3243),J=n(5269),X=n(4842),$=n(8186),ee=n(3884),ae=n(8870),ne=n(5869);K.render=r;const le=K;O()(K,"components",{QPage:M.Z,QTable:P.Z,QCard:R.Z,QCardSection:A.Z,QForm:J.Z,QInput:X.Z,QBtn:D.Z,QTr:$.Z,QTd:ee.Z,QTooltip:ae.Z,QSeparator:ne.Z})}}]);