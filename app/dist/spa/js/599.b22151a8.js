"use strict";(self["webpackChunkiconos_plataforma"]=self["webpackChunkiconos_plataforma"]||[]).push([[599],{599:(e,a,t)=>{t.r(a),t.d(a,{default:()=>U});var o=t(3673),l=t(8880),n=t(2323);const d=(0,o._)("div",{class:"text-h6 text-primary"},"Periodos",-1),i={class:"col"},r={class:"col"},s={class:"col"},m={class:"col text-right"},p=(0,o.Uk)("Eliminar");function u(e,a,t,u,c,w){const D=(0,o.up)("q-input"),b=(0,o.up)("q-btn"),f=(0,o.up)("q-form"),g=(0,o.up)("q-card-section"),h=(0,o.up)("q-card"),_=(0,o.up)("q-td"),k=(0,o.up)("q-tooltip"),Z=(0,o.up)("q-tr"),v=(0,o.up)("q-table"),y=(0,o.up)("q-separator"),I=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(I,{padding:""},{default:(0,o.w5)((()=>[d,(0,o.Wm)(v,{class:"shadow-0",loading:u.loading,"no-data-label":"Sin datos",rows:u.items,columns:u.columns},{top:(0,o.w5)((()=>[(0,o.Wm)(h,{class:"shadow-24 bg-dark full-width q-my-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,{class:"row q-col-gutter-md items-center",onSubmit:(0,l.iM)(u.submitNew,["prevent"])},{default:(0,o.w5)((()=>[(0,o._)("div",i,[(0,o.Wm)(D,{modelValue:u.newItem.name,"onUpdate:modelValue":a[0]||(a[0]=e=>u.newItem.name=e),label:"Nombre",standout:"bg-primary text-white",dense:"",dark:"",required:""},null,8,["modelValue"])]),(0,o._)("div",r,[(0,o.Wm)(D,{modelValue:u.newItem.startDate,"onUpdate:modelValue":a[1]||(a[1]=e=>u.newItem.startDate=e),label:"Inicio",type:"date",standout:"bg-primary text-white",dense:"",dark:""},null,8,["modelValue"])]),(0,o._)("div",s,[(0,o.Wm)(D,{modelValue:u.newItem.endDate,"onUpdate:modelValue":a[2]||(a[2]=e=>u.newItem.endDate=e),label:"Fin",type:"date",standout:"bg-primary text-white",dense:"",dark:""},null,8,["modelValue"])]),(0,o._)("div",m,[(0,o.Wm)(b,{label:"Crear periodo",color:"primary",unelevated:"","no-caps":"",disabled:""==u.newItem.name,type:"submit"},null,8,["disabled"])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),body:(0,o.w5)((e=>[(0,o.Wm)(Z,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{class:"text-bold",key:"name",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,o.Wm)(_,{key:"startDate",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.row.startDate),1)])),_:2},1032,["props"]),(0,o.Wm)(_,{key:"endDate",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.row.endDate),1)])),_:2},1032,["props"]),(0,o.Wm)(_,{key:"actions",props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{icon:"delete",onClick:a=>u.deleteItem(e.row),size:"xs",padding:"4px",color:"negative"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[p])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["loading","rows","columns"]),(0,o.Wm)(y,{spaced:""})])),_:1})}var c=t(515),w=t.n(c),D=t(1959),b=t(9582),f=t(7874),g=t(8623),h=t(1082),_=t(8825);const k={components:{editThis:g.Z},setup(){const e=(0,_.Z)(),a=((0,b.yj)(),(0,f.oR)()),t=(0,D.iH)(null),o=(0,D.iH)(!0),l=(0,D.iH)([]),n=[{name:"name",label:"Nombre",field:"name",align:"left"},{name:"startDate",label:"Inicio",field:"startDate",align:"center"},{name:"endDate",label:"Fin",field:"endDate",align:"center"},{name:"actions"}],d=(0,D.iH)({name:"",startDate:h.ZP.formatDate(Date.now(),"YYYY-MM-DD"),endDate:h.ZP.formatDate(Date.now(),"YYYY-MM-DD")}),i=()=>{const e=w()(w()({},d.value),{},{coll:"periodos"});a.dispatch("api/SaveItem",e).then((e=>{r(),d.value={name:"",startDate:h.ZP.formatDate(Date.now(),"YYYY-MM-DD"),endDate:h.ZP.formatDate(Date.now(),"YYYY-MM-DD")}}))},r=()=>{a.dispatch("api/GetAllData","periodos").then((e=>{l.value=e,o.value=!1}))},s=t=>{e.dialog({title:"Eliminar periodo",cancel:"Cancelar",ok:"Eliminar"}).onOk((()=>{a.dispatch("api/RemoveItem",["periodos","_id",t._id]).then((a=>{r(),e.notify("Eliminado")}))}))};r();const m=()=>{a.dispatch("api/SetPeriodo","hola").then((e=>{console.log(e)}))};return{loadItem:r,loading:o,items:l,columns:n,newItem:d,submitNew:i,deleteItem:s,periodoActual:t,SetPeriodo:m}}};var Z=t(4379),v=t(3243),y=t(151),I=t(5589),W=t(5269),Y=t(4842),q=t(8240),Q=t(8186),x=t(3884),M=t(8870),S=t(5869),V=t(7208),C=t(7518),P=t.n(C);k.render=u;const U=k;P()(k,"components",{QPage:Z.Z,QTable:v.Z,QCard:y.Z,QCardSection:I.Z,QForm:W.Z,QInput:Y.Z,QBtn:q.Z,QTr:Q.Z,QTd:x.Z,QTooltip:M.Z,QSeparator:S.Z,QSelect:V.Z})}}]);