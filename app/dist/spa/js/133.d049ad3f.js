"use strict";(self["webpackChunkiconos_plataforma"]=self["webpackChunkiconos_plataforma"]||[]).push([[133],{4133:(e,a,t)=>{t.r(a),t.d(a,{default:()=>U});var o=t(3673),l=t(8880),n=t(2323);const i=(0,o._)("div",{class:"text-h6 text-primary"},"Periodos",-1),d={class:"col"},r={class:"col"},s={class:"col"},m={class:"col text-right"},p=(0,o.Uk)("Eliminar");function c(e,a,t,c,u,w){const f=(0,o.up)("q-input"),b=(0,o.up)("q-btn"),D=(0,o.up)("q-form"),k=(0,o.up)("q-card-section"),g=(0,o.up)("q-card"),_=(0,o.up)("q-icon"),y=(0,o.up)("q-tooltip"),h=(0,o.up)("q-td"),v=(0,o.up)("q-tr"),I=(0,o.up)("q-table"),W=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(W,{padding:""},{default:(0,o.w5)((()=>[i,(0,o.Wm)(I,{class:"shadow-0",loading:c.loading,"no-data-label":"Sin datos",rows:c.items,columns:c.columns},{top:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"shadow-24 bg-dark full-width q-my-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Wm)(D,{class:"row q-col-gutter-md items-center",onSubmit:(0,l.iM)(c.submitNew,["prevent"])},{default:(0,o.w5)((()=>[(0,o._)("div",d,[(0,o.Wm)(f,{modelValue:c.newItem.name,"onUpdate:modelValue":a[0]||(a[0]=e=>c.newItem.name=e),label:"Nombre",standout:"bg-primary text-white",dense:"",dark:"",required:""},null,8,["modelValue"])]),(0,o._)("div",r,[(0,o.Wm)(f,{modelValue:c.newItem.startDate,"onUpdate:modelValue":a[1]||(a[1]=e=>c.newItem.startDate=e),label:"Inicio",type:"date",standout:"bg-primary text-white",dense:"",dark:""},null,8,["modelValue"])]),(0,o._)("div",s,[(0,o.Wm)(f,{modelValue:c.newItem.endDate,"onUpdate:modelValue":a[2]||(a[2]=e=>c.newItem.endDate=e),label:"Fin",type:"date",standout:"bg-primary text-white",dense:"",dark:""},null,8,["modelValue"])]),(0,o._)("div",m,[(0,o.Wm)(b,{label:"Crear periodo",color:"primary",unelevated:"","no-caps":"",disabled:""==c.newItem.name,type:"submit"},null,8,["disabled"])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),body:(0,o.w5)((e=>[(0,o.Wm)(v,{props:e,class:(0,n.C_)(e.row.actual?"bg-blue-grey-1 text-primary":"")},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{key:"actual",props:e},{default:(0,o.w5)((()=>[e.row.actual?((0,o.wg)(),(0,o.j4)(_,{key:0,name:"check",color:"primary",size:"md"})):((0,o.wg)(),(0,o.j4)(b,{key:1,icon:"check_box_outline_blank",unelevated:"",color:"primary",flat:"",size:"sm",onClick:a=>c.setPeriodo(e.row)},{default:(0,o.w5)((()=>[(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Asignar "+(0,n.zw)(e.row.name)+" como periodo actual.",1)])),_:2},1024)])),_:2},1032,["onClick"]))])),_:2},1032,["props"]),(0,o.Wm)(h,{class:"text-bold text-body1",key:"name",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"startDate",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.row.startDate),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"endDate",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.row.endDate),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"actions",props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{icon:"delete",onClick:a=>c.deleteItem(e.row),size:"xs",padding:"4px",color:"negative"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[p])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props","class"])])),_:1},8,["loading","rows","columns"])])),_:1})}var u=t(515),w=t.n(u),f=t(1959),b=t(9582),D=t(7874),k=t(8623),g=t(1082),_=t(8825);const y={components:{editThis:k.Z},setup(){const e=(0,_.Z)(),a=((0,b.yj)(),(0,D.oR)()),t=(0,f.Fl)((()=>a.getters["api/getPeriodo"])),o=(0,f.iH)(!0),l=(0,f.iH)([]),n=[{name:"actual",label:"Actual",field:"actual",align:"center"},{name:"name",label:"Nombre",field:"name",align:"left"},{name:"startDate",label:"Inicio",field:"startDate",align:"center"},{name:"endDate",label:"Fin",field:"endDate",align:"center"},{name:"actions"}],i=(0,f.iH)({name:"",startDate:g.ZP.formatDate(Date.now(),"YYYY-MM-DD"),endDate:g.ZP.formatDate(Date.now(),"YYYY-MM-DD")}),d=()=>{const e=w()(w()({},i.value),{},{coll:"periodos"});a.dispatch("api/SaveItem",e).then((e=>{r(),i.value={name:"",startDate:g.ZP.formatDate(Date.now(),"YYYY-MM-DD"),endDate:g.ZP.formatDate(Date.now(),"YYYY-MM-DD")}}))},r=()=>{a.dispatch("api/GetAllData","periodos").then((e=>{l.value=e,o.value=!1})),a.dispatch("api/GetPeriodo")},s=t=>{e.dialog({title:"Eliminar periodo",cancel:"Cancelar",ok:"Eliminar"}).onOk((()=>{a.dispatch("api/RemoveItem",["periodos","_id",t._id]).then((a=>{r(),e.notify("Eliminado")}))}))};r();const m=t=>{a.dispatch("api/SetPeriodo",t).then((a=>{r(),e.notify("Periodo actual modificado")}))};return{loadItem:r,loading:o,items:l,columns:n,newItem:i,submitNew:d,deleteItem:s,periodoActual:t,setPeriodo:m}}};var h=t(4379),v=t(3243),I=t(151),W=t(5589),Z=t(5269),Y=t(4842),q=t(8240),x=t(8186),P=t(3884),C=t(4554),Q=t(8870),M=t(7518),V=t.n(M);y.render=c;const U=y;V()(y,"components",{QPage:h.Z,QTable:v.Z,QCard:I.Z,QCardSection:W.Z,QForm:Z.Z,QInput:Y.Z,QBtn:q.Z,QTr:x.Z,QTd:P.Z,QIcon:C.Z,QTooltip:Q.Z})}}]);