"use strict";(self["webpackChunkiconos_plataforma"]=self["webpackChunkiconos_plataforma"]||[]).push([[635],{3635:(e,a,n)=>{n.r(a),n.d(a,{default:()=>K});var t=n(3673),l=n(8880),o=n(2323);const i=(0,t._)("div",{class:"text-h6 text-primary"},"Generaciones",-1),d={class:"col"},u={class:"col text-right"},s=(0,t.Uk)("Eliminar");function r(e,a,n,r,c,m){const p=(0,t.up)("q-input"),g=(0,t.up)("q-btn"),w=(0,t.up)("q-form"),v=(0,t.up)("q-card-section"),f=(0,t.up)("q-card"),b=(0,t.up)("q-td"),_=(0,t.up)("addStudent"),h=(0,t.up)("q-tooltip"),q=(0,t.up)("q-tr"),W=(0,t.up)("q-table"),Z=(0,t.up)("q-separator"),k=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(k,{padding:""},{default:(0,t.w5)((()=>[i,(0,t.Wm)(W,{class:"shadow-0",loading:r.loading,"no-data-label":"Sin datos",rows:r.items,columns:r.columns},{top:(0,t.w5)((()=>[(0,t.Wm)(f,{class:"shadow-24 bg-dark full-width q-my-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,{class:"row q-col-gutter-md items-center",onSubmit:(0,l.iM)(r.submitNew,["prevent"])},{default:(0,t.w5)((()=>[(0,t._)("div",d,[(0,t.Wm)(p,{modelValue:r.newItem.name,"onUpdate:modelValue":a[0]||(a[0]=e=>r.newItem.name=e),label:"Nombre",standout:"bg-primary text-white",dense:"",dark:"",required:""},null,8,["modelValue"])]),(0,t._)("div",u,[(0,t.Wm)(g,{label:"Crear generaci칩n",color:"primary",unelevated:"","no-caps":"",disabled:""==r.newItem.name,type:"submit"},null,8,["disabled"])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),body:(0,t.w5)((e=>[(0,t.Wm)(q,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{class:"text-bold",key:"name",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,t.Wm)(b,{key:"add",props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{generacion:e.row},null,8,["generacion"])])),_:2},1032,["props"]),(0,t.Wm)(b,{key:"actions",props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{icon:"delete",onClick:a=>r.deleteItem(e.row),size:"xs",padding:"4px",color:"negative"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,null,{default:(0,t.w5)((()=>[s])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["loading","rows","columns"]),(0,t.Wm)(Z,{spaced:""})])),_:1})}var c=n(515),m=n.n(c),p=n(1959),g=n(9582),w=n(7874),v=(n(8623),n(1082),n(8825));const f=(0,t.Uk)("Generaci칩n: "),b={class:"text-bold text-primary"},_={class:"text-body1"},h={class:"text-caption text-grey"};function q(e,a,n,l,i,d){const u=(0,t.up)("q-btn"),s=(0,t.up)("q-toolbar-title"),r=(0,t.up)("q-toolbar"),c=(0,t.up)("q-checkbox"),m=(0,t.up)("q-item-section"),p=(0,t.up)("q-item"),g=(0,t.up)("q-list"),w=(0,t.up)("q-card-section"),v=(0,t.up)("q-inner-loading"),q=(0,t.up)("q-card"),W=(0,t.up)("q-dialog");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(u,{label:"A침adir estudiantes",unelevated:"",color:"primary",size:"sm","no-caps":"",onClick:l.dialogOpen},null,8,["onClick"]),(0,t.Wm)(W,{modelValue:l.dialog,"onUpdate:modelValue":a[0]||(a[0]=e=>l.dialog=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{class:"shadow-24"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,{class:"text-body2"},{default:(0,t.w5)((()=>[f,(0,t._)("span",b,(0,o.zw)(n.generacion.name),1)])),_:1})])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(g,{dense:"",separator:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.estudiantes,((e,a)=>((0,t.wg)(),(0,t.j4)(p,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:e.currentGen,"onUpdate:modelValue":a=>e.currentGen=a,onClick:a=>l.addRemoveGen(e)},null,8,["modelValue","onUpdate:modelValue","onClick"])])),_:2},1024),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t._)("div",_,(0,o.zw)(e.name),1),(0,t._)("div",h,(0,o.zw)(e.tituloInvestigacion),1)])),_:2},1024)])),_:2},1024)))),256))])),_:1})])),_:1}),(0,t.Wm)(v,{showing:l.loading},null,8,["showing"])])),_:1})])),_:1},8,["modelValue"])])}var W=n(8603),Z=n.n(W);const k={props:["generacion"],setup(e){const a=(0,v.Z)(),n=(0,w.oR)(),t=((0,g.tv)(),(0,p.iH)(!1)),l=()=>{t.value=!0,u()},o=(0,p.iH)(!0),i=(0,p.iH)(null),d=(0,p.iH)(null),u=()=>{o.value=!0,n.dispatch("api/GetUsersByGroup","estudiante").then((a=>{for(var t in i.value=[],a)a[t].active&&i.value.push(a[t]);n.dispatch("api/GetAllData","estudiantes").then((a=>{for(var n in i.value){const t=a.filter((function(e,a,t){return e.user_id==i.value[n]._id}));Z().merge(i.value[n],t[0]),i.value[n].currentGen=Z().isEqual(i.value[n].generacion,e.generacion)}o.value=!1}))}))},s=t=>{var l={coll:"estudiantes",_id:t._id,generacion:t.currentGen?e.generacion:""};n.dispatch("api/SaveItem",l).then((e=>{console.log(e),a.notify("Estudiante actualizado")}))};return{loading:o,dialog:t,dialogOpen:l,estudiantes:i,generacionModel:d,addRemoveGen:s}}};var Q=n(8240),y=n(6778),x=n(151),C=n(9570),I=n(3747),G=n(5589),S=n(7011),V=n(3414),H=n(2035),U=n(5735),z=n(6941),T=n(7518),E=n.n(T);k.render=q;const D=k;E()(k,"components",{QBtn:Q.Z,QDialog:y.Z,QCard:x.Z,QToolbar:C.Z,QToolbarTitle:I.Z,QCardSection:G.Z,QList:S.Z,QItem:V.Z,QItemSection:H.Z,QCheckbox:U.Z,QInnerLoading:z.Z});const R={components:{addStudent:D},setup(){const e=(0,v.Z)(),a=((0,g.yj)(),(0,w.oR)()),n=(0,p.iH)(!0),t=(0,p.iH)([]),l=[{name:"name",label:"Nombre",field:"name",align:"left"},{name:"add",label:"A침adir estudiantes",field:"add"},{name:"actions"}],o=(0,p.iH)({name:""}),i=()=>{const e=m()(m()({},o.value),{},{coll:"generaciones"});a.dispatch("api/SaveItem",e).then((e=>{d(),o.value={name:""}}))},d=()=>{a.dispatch("api/GetAllData","generaciones").then((e=>{t.value=e,n.value=!1}))},u=n=>{e.dialog({title:"Eliminar generacion",cancel:"Cancelar",ok:"Eliminar"}).onOk((()=>{a.dispatch("api/RemoveItem",["generaciones","_id",n._id]).then((a=>{d(),e.notify("Eliminado")}))}))};return d(),{loadItem:d,loading:n,items:t,columns:l,newItem:o,submitNew:i,deleteItem:u}}};var A=n(4379),N=n(3243),j=n(5269),B=n(4842),O=n(8186),L=n(3884),M=n(8870),F=n(5869);R.render=r;const K=R;E()(R,"components",{QPage:A.Z,QTable:N.Z,QCard:x.Z,QCardSection:G.Z,QForm:j.Z,QInput:B.Z,QBtn:Q.Z,QTr:O.Z,QTd:L.Z,QTooltip:M.Z,QSeparator:F.Z})}}]);