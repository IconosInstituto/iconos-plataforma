"use strict";(self["webpackChunkiconos_plataforma"]=self["webpackChunkiconos_plataforma"]||[]).push([[833],{8833:(e,a,o)=>{o.r(a),o.d(a,{default:()=>C});var t=o(3673);function n(e,a,o,n,s,i){const l=(0,t.up)("activos"),r=(0,t.up)("q-separator"),c=(0,t.up)("inactivos"),p=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(p,{padding:""},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{ref:"docentesActivos"},null,512),(0,t.Wm)(r,{spaced:""}),(0,t.Wm)(c,{onUpdated:a[0]||(a[0]=e=>n.docentesActivos.addDocente(e))})])),_:1})}var s=o(1959),i=o(8825),l=o(7874),r=o(9582),c=o(2323);const p=(0,t._)("div",{class:"text-h6"},"Usuarios no habilitados",-1),d=(0,t.Uk)("Habilitar usuario");function u(e,a,o,n,s,i){const l=(0,t.up)("q-inner-loading"),r=(0,t.up)("q-td"),u=(0,t.up)("q-tooltip"),m=(0,t.up)("q-toggle"),w=(0,t.up)("q-tr"),g=(0,t.up)("q-table");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(g,{class:(0,c.C_)(["shadow-0",0==n.inactivos.length?"bg-grey":""]),rows:n.inactivos,columns:n.columns,dense:"",pagination:n.pagination},{top:(0,t.w5)((()=>[p])),loading:(0,t.w5)((()=>[(0,t.Wm)(l,{showing:"",color:"primary"})])),body:(0,t.w5)((e=>[(0,t.Wm)(w,{props:e,"no-hover":""},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"text-bold",key:"user",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.user),1)])),_:2},1032,["props"]),(0,t.Wm)(r,{key:"name",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,t.Wm)(r,{key:"email",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.email),1)])),_:2},1032,["props"]),(0,t.Wm)(r,{key:"active",props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:e.row.active,"onUpdate:modelValue":[a=>e.row.active=a,a=>n.habilitarFN(e.row)]},{default:(0,t.w5)((()=>[e.row.active?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(u,{key:0},{default:(0,t.w5)((()=>[d])),_:1}))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination","class"])])}const m={setup(e,a){const o=(0,i.Z)(),n=(0,l.oR)(),c=((0,r.tv)(),(0,t.f3)("$_")),p=(0,s.iH)([]),d=(0,s.iH)(),u=[{name:"user",label:"Nº de Cuenta",field:"user",align:"left"},{name:"name",label:"Nombre",field:"name",align:"left"},{name:"email",label:"Email",field:"email",align:"left"},{name:"active",label:"Habilitar acceso",field:"active",align:"center",sortable:!0}],m={sortBy:"active",rowsPerPage:5,descending:!0},w=async e=>{await n.dispatch("api/SaveUser",{user:e});o.notify("Docente habilitado"),g(e),c.remove(p.value,e)},g=async e=>{let o=await n.dispatch("api/GetSingleData",{coll:"docentes",id:e._id});const t={coll:"docentes",user_id:e._id};if(0==o.length){const e=await n.dispatch("api/SaveItem",t);a.emit("updated",e)}else console.log("Usuario rehabilitado"),a.emit("updated",o[0])},f=async()=>{const e=await n.dispatch("api/GetUsersByGroupAll","docente"),a=await c.partition(e,(e=>!1===e.active));p.value=a[0]};return f(),{inactivos:p,columns:u,pagination:m,habilitarFN:w,generacionperiodoRef:d}}};var w=o(3243),g=o(6941),f=o(8186),v=o(3884),b=o(8886),k=o(8870),h=o(7518),y=o.n(h);m.render=u;const _=m;y()(m,"components",{QTable:w.Z,QInnerLoading:g.Z,QTr:f.Z,QTd:v.Z,QToggle:b.Z,QTooltip:k.Z});const q=(0,t._)("div",{class:"text-h6"},"Docentes",-1);function W(e,a,o,n,s,i){const l=(0,t.up)("q-inner-loading"),r=(0,t.up)("q-td"),p=(0,t.up)("q-tr"),d=(0,t.up)("q-table");return(0,t.wg)(),(0,t.iD)("div",null,[n.docentes.length>0?((0,t.wg)(),(0,t.j4)(d,{key:0,class:"shadow-0",rows:n.docentes,columns:n.columns,pagination:n.pagination},{top:(0,t.w5)((()=>[q])),loading:(0,t.w5)((()=>[(0,t.Wm)(l,{showing:"",color:"primary"})])),body:(0,t.w5)((e=>[e.row.user?((0,t.wg)(),(0,t.j4)(p,{key:0,class:"cursor-pointer",props:e,onClick:a=>n.gotoDocente(e.row)},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"text-bold",key:"user",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.user.user),1)])),_:2},1032,["props"]),(0,t.Wm)(r,{key:"name",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.user.name),1)])),_:2},1032,["props"]),(0,t.Wm)(r,{key:"email",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.user.email),1)])),_:2},1032,["props"])])),_:2},1032,["props","onClick"])):(0,t.kq)("",!0)])),_:1},8,["rows","columns","pagination"])):(0,t.kq)("",!0)])}const Z={setup(){(0,i.Z)();const e=(0,l.oR)(),a=(0,r.tv)(),o=((0,r.yj)(),(0,t.f3)("$_")),n=(0,s.iH)([]),c=[{name:"user",label:"Nº de Cuenta",field:"user",align:"left"},{name:"name",label:"Nombre",field:"name",align:"left"},{name:"email",label:"Email",field:"email",align:"left"}],p={sortBy:"active",rowsPerPage:10,descending:!0},d=async()=>{const a=await e.dispatch("api/GetAllData","docentes"),t=await o.partition(a,(e=>!0===e.user.active));n.value=t[0]};d();const u=async e=>{e.user?n.value.push(e):d()},m=e=>{const o="/docente/"+e.user_id;console.log(o),a.push(o)};return{docentes:n,columns:c,pagination:p,addDocente:u,gotoDocente:m}}};Z.render=W;const U=Z;y()(Z,"components",{QTable:w.Z,QInnerLoading:g.Z,QTr:f.Z,QTd:v.Z});const Q={components:{inactivos:_,activos:U},setup(){(0,i.Z)(),(0,l.oR)(),(0,r.tv)();const e=(0,s.iH)();return{docentesActivos:e}}};var D=o(4379),T=o(5869);Q.render=n;const C=Q;y()(Q,"components",{QPage:D.Z,QSeparator:T.Z})}}]);